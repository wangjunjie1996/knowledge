# GO

## Go语言标准库强大

| Go语言标准库包名 |                功  能                     |
| --------------- |    --------------------------------       |
|     bufio 	    |         带缓冲的 I/O 操作                  |
|     bytes       |       	实现字节操作                       |
|    container 	  |       封装堆、列表和环形列表等容器           |
|     crypto 	    |                加密算法                    |
|    database     |          	数据库驱动和接口                  |
|     debug 	    |       各种调试文件格式访问及调试功能          |
|    encoding     |   	常见算法如 JSON、XML、Base64 等         |
|      flag       |             	命令行解析                   | 
|       fmt       |             	格式化操作                   |
|       go        |Go语言的词法、语法树、类型等。可通过这个包进行代码信息提取和修改| 	
| html 	| HTML 转义及模板系统 |
| image 	| 常见图形格式的访问及生成 |
| io 	| 实现 I/O 原始访问接口及访问封装 |
| math 	| 数学库 |
| net 	| 网络库，支持 Socket、HTTP、邮件、RPC、SMTP 等 |
| os 	| 操作系统平台不依赖平台操作封装 |
| path 	| 兼容各操作系统的路径操作实用函数 |
| plugin 	| Go 1.7 加入的插件系统。支持将代码编译为插件，按需加载 |
| reflect 	| 语言反射支持。可以动态获得代码中的类型信息，获取和修改变量的值 |
| regexp 	| 正则表达式封装 |
| runtime 	| 运行时接口 |
| sort 	| 排序接口 |
| strings 	| 字符串转换、解析及实用函数 |
| time 	| 时间接口 |
| text 	| 文本模板及 Token 词法器 |

## 在Windows上安装Go语言开发包
### 下载Go语言开发包
（https://golang.google.cn/dl/）下载 Windows 系统下的Go语言开发包安装
### 设置环境变量
开发包安装完成后，我们还需要配置一下GOPATH 环境变量，之后才可以使用Go语言进行开发。GOPATH 是一个路径，用来存放开发中需要用到的代码包。  
在桌面或者资源管理器右键“此电脑”（或者“我的电脑”）→“属性”→“高级系统设置”→“环境变量”  
用户变量添加 GOPATH

## Go语言工程结构
Go语言开发环境时提到的环境变量 GOPATH，项目的构建主要是靠它来实现的。这么说吧，如果想要构建一个项目，就需要将这个项目的目录添加到 GOPATH 中，多个项目之间可以使用;分隔。  
如果不配置 GOPATH，即使处于同一目录，代码之间也无法通过绝对路径相互调用。  
### 目录结构
一个Go语言项目的目录一般包含以下三个子目录：
  * src 目录：放置项目和库的源文件；
  * pkg 目录：放置编译后生成的包/库的归档文件；
  * bin 目录：放置编译后生成的可执行文件。

1. src 目录
> 用于以包（package）的形式组织并存放 Go 源文件，这里的包与 src 下的每个子目录是一一对应。例如，若一个源文件被声明属于 log 包，那么它就应当保存在 src/log 目录中。

> 并不是说 src 目录下不能存放 Go 源文件，一般在测试或演示的时候也可以把 Go 源文件直接放在 src 目录下，但是这么做的话就只能声明该源文件属于 main 包了。正常开发中还是建议大家把 Go 源文件放入特定的目录中。

> 包是Go语言管理代码的重要机制，其作用类似于Java中的 package 和 C/C++ 的头文件。Go 源文件中第一段有效代码必须是package <包名> 的形式，如 package hello。

> 另外需要注意的是，Go语言会把通过go get 命令获取到的库源文件下载到 src 目录下对应的文件夹当中。

2. pkg 目录

> 用于存放通过go install 命令安装某个包后的归档文件。归档文件是指那些名称以“.a”结尾的文件。

> 该目录与 GOROOT 目录（也就是Go语言的安装目录）下的 pkg 目录功能类似，区别在于这里的 pkg 目录专门用来存放项目代码的归档文件。

> 编译和安装项目代码的过程一般会以代码包为单位进行，比如 log 包被编译安装后，将生成一个名为 log.a 的归档文件，并存放在当前项目的 pkg 目录下。

3. bin 目录
> 与 pkg 目录类似，在通过go install 命令完成安装后，保存由 Go 命令源文件生成的可执行文件。在类 Unix 操作系统下，这个可执行文件的名称与命令源文件的文件名相同。而在 Windows 操作系统下，这个可执行文件的名称则是命令源文件的文件名加 .exe 后缀。

### 源文件
上面我们提到了命令源文件和库源文件，它们到底是什么呢？  

  * 命令源文件：如果一个 Go 源文件被声明属于 main 包，并且该文件中包含 main 函数，则它就是命令源码文件。命令源文件属于程序的入口，可以通过Go语言的go run 命令运行或者通过go build 命令生成可执行文件。
  * 库源文件：库源文件则是指存在于某个包中的普通源文件，并且库源文件中不包含 main 函数。

> 不管是命令源文件还是库源文件，在同一个目录下的所有源文件，其所属包的名称必须一致的。


## 第一个Go语言程序
```go
    package main    // 声明 main 包
    import (
        "fmt"       // 导入 fmt 包，打印字符串是需要用到
    )
    func main() {   // 声明 main 主函数
        fmt.Println("Hello World!") // 打印 Hello World!
    }
```

## Go语言程序的编译和运行
可以通过Go语言提供的go build或者go run命令对Go语言程序进行编译：

  * go build 命令可以将Go语言程序代码编译成二进制的可执行文件，但是需要我们手动运行该二进制文件；
  * go run 命令则更加方便，它会在编译后直接运行Go语言程序，编译过程中会产生一个临时文件，但不会生成可执行文件，这个特点很适合用来调试程序。

## 变量的声明（使用var关键字）

声明变量的一般形式是使用 var 关键字：
```
var name type
```
其中，var 是声明变量的关键字，name 是变量名，type 是变量的类型。

需要注意的是，Go语言和许多编程语言不同，它在声明变量时将变量的类型放在变量的名称之后。这样做的好处就是可以避免像C语言中那样含糊不清的声明形式，例如：int* a, b; 。其中只有  
a 是指针而 b 不是。如果你想要这两个变量都是指针，则需要将它们分开书写。而在 Go 中，则可以和轻松地将它们都声明为指针类型：
```go
var a, b *int
```

Go语言的基本类型有： 
  * bool
  * string
  * int、int8、int16、int32、int64
  * uint、uint8、uint16、uint32、uint64、uintptr
  * byte // uint8 的别名
  * rune // int32 的别名 代表一个 Unicode 码
  * float32、float64
  * complex64、complex128

当一个变量被声明之后，系统自动赋予它该类型的零值：int 为 0，float 为 0.0，bool 为 false，string 为空字符串，指针为 nil 等。所有的内存在 Go 中都是经过初始化的。  
变量的命名规则遵循骆驼命名法，即首个单词小写，每个新单词的首字母大写，例如：numShips 和 startDate 。  
变量的声明有几种形式，通过下面几节进行整理归纳。   
### 标准格式
var 变量名 变量类型
### 批量格式
```go
    var (
        a int
        b string
        c []float32
        d func() bool
        e struct {
            x int
        }
    )
```
### 简短格式
名字 := 表达式

>需要注意的是，简短模式（short variable declaration）有以下限制：
  * 定义变量，同时显式初始化。
  * 不能提供数据类型。
  * 只能用在函数内部。
```go
i, j := 0, 1
```

## 变量的初始化
### 标准格式
var 变量名 类型 = 表达式
```go
var hp int = 100
```
### 编译器推导类型的格式
在标准格式的基础上，将 int 省略后，编译器会尝试根据等号右边的表达式推导 hp 变量的类型。 
```go
var hp = 100
```
### 短变量声明并初始化
```go
hp := 100
```
> 注意：由于使用了:=，而不是赋值的=，因此推导声明写法的左值变量必须是没有定义过的变量。若定义过，将会发生编译错误。

使用 Go 的“多重赋值”特性，可以轻松完成变量交换的任务
```go
    var a int = 100
    var b int = 200
    b, a = a, b
    fmt.Println(a, b)
```
多重赋值时，变量的左值和右值按从左到右的顺序赋值。

## 匿名变量（没有名字的变量）
匿名变量的特点是一个下画线“_”，“_”本身就是一个特殊的标识符，被称为空白标识符。它可以像其他标识符那样用于变量的声明或赋值（任何类型都可以赋值给它），但任何赋给这个标识符的值都将被抛弃，因此这些值不能在后续的代码中使用，也不可以使用这个标识符作为变量对其它变量进行赋值或运算。使用匿名变量时，只需要在变量声明的地方使用下画线替换即可。例如：
```go
    func GetData() (int, int) {
        return 100, 200
    }
    func main(){
        a, _ := GetData()
        _, b := GetData()
        fmt.Println(a, b)
    }
```

## Go语言变量的作用域
根据变量定义位置的不同，可以分为以下三个类型：

  * 函数内定义的变量称为局部变量
  * 函数外定义的变量称为全局变量
  * 函数定义中的变量称为形式参数

## Go语言整型（整数类型）
Go语言同时提供了有符号和无符号的整数类型，其中包括 int8、int16、int32 和 int64 四种大小截然不同的有符号整数类型，分别对应 8、16、32、64 bit（二进制位）大小的有符号整数，与此对应的是 uint8、uint16、uint32 和 uint64 四种无符号整数类型。

此外还有两种整数类型 int 和 uint，它们分别对应特定 CPU 平台的字长（机器字大小），其中 int 表示有符号整数，应用最为广泛，uint 表示无符号整数。实际开发中由于编译器和计算机硬件的不同，int 和 uint 所能表示的整数大小会在 32bit 或 64bit 之间变化。

大多数情况下，我们只需要 int 一种整型即可，它可以用于循环计数器（for 循环中控制循环次数的变量）、数组和切片的索引，以及任何通用目的的整型运算符，通常 int 类型的处理速度也是最快的。

用来表示 Unicode 字符的 rune 类型和 int32 类型是等价的，通常用于表示一个 Unicode 码点。这两个名称可以互换使用。同样，byte 和 uint8 也是等价类型，byte 类型一般用于强调数值是一个原始的数据而不是一个小的整数。

最后，还有一种无符号的整数类型 uintptr，它没有指定具体的 bit 大小但是足以容纳指针。uintptr 类型只有在底层编程时才需要，特别是Go语言和C语言函数库或操作系统接口相交互的地方。

尽管在某些特定的运行环境下 int、uint 和 uintptr 的大小可能相等，但是它们依然是不同的类型，比如 int 和 int32，虽然 int 类型的大小也可能是 32 bit，但是在需要把 int 类型当做 int32 类型使用的时候必须显示的对类型进行转换，反之亦然。

Go语言中有符号整数采用 2 的补码形式表示，也就是最高 bit 位用来表示符号位，一个 n-bit 的有符号数的取值范围是从 -2(n-1) 到 2(n-1)-1。无符号整数的所有 bit 位都用于表示非负数，取值范围是 0 到 2n-1。例如，int8 类型整数的取值范围是从 -128 到 127，而 uint8 类型整数的取值范围是从 0 到 255。

## Go语言浮点类型（小数类型）
Go语言提供了两种精度的浮点数 float32 和 float64，它们的算术规范由 IEEE754 浮点数国际标准定义，该浮点数规范被所有现代的 CPU 支持。

这些浮点数类型的取值范围可以从很微小到很巨大。浮点数取值范围的极限值可以在 math 包中找到：

   * 常量 math.MaxFloat32 表示 float32 能取到的最大数值，大约是 3.4e38；
   * 常量 math.MaxFloat64 表示 float64 能取到的最大数值，大约是 1.8e308；
   * float32 和 float64 能表示的最小值分别为 1.4e-45 和 4.9e-324。
  
一个 float32 类型的浮点数可以提供大约 6 个十进制数的精度，而 float64 则可以提供约 15 个十进制数的精度，通常应该优先使用 float64 类型，因为 float32 类型的累计计算误差很容易扩散，并且 float32 能精确表示的正整数并不是很大。  

浮点数在声明的时候可以只写整数部分或者小数部分，像下面这样：
```go
    const e = .71828 // 0.71828
    const f = 1.     // 1
```
很小或很大的数最好用科学计数法书写，通过 e 或 E 来指定指数部分：
```go
    const Avogadro = 6.02214129e23  // 阿伏伽德罗常数
    const Planck   = 6.62606957e-34 // 普朗克常数
```

## Go语言复数
在计算机中，复数是由两个浮点数表示的，其中一个表示实部（real），一个表示虚部（imag）。

Go语言中复数的类型有两种，分别是  complex128（64 位实数和虚数）和 complex64（32 位实数和虚数），其中 complex128 为复数的默认类型。

复数的值由三部分组成 RE + IMi，其中 RE 是实数部分，IM 是虚数部分，RE 和 IM 均为 float 类型，而最后的 i 是虚数单位。

声明复数的语法格式如下所示：
```go
var name complex128 = complex(x, y)
```
其中 name 为复数的变量名，complex128 为复数的类型，“=”后面的 complex 为Go语言的内置函数用于为复数赋值，x、y 分别表示构成该复数的两个 float64 类型的数值，x 为实部，y 为虚部。

简写
```go
name := complex(x, y)
```
对于一个复数z := complex(x, y)，可以通过Go语言的内置函数real(z) 来获得该复数的实部，也就是 x；通过imag(z) 获得该复数的虚部，也就是 y。  
复数也可以用==和!=进行相等比较，只有两个复数的实部和虚部都相等的时候它们才是相等的。  

## 复数运算法则
复数运算法则有：加减法、乘除法。两个复数的和依然是复数，它的实部是原来两个复数实部的和，它的虚部是原来两个虚部的和。复数的加法满足交换律和结合律。此外，复数作为幂和对数的底数、指数、真数时，其运算规则可由欧拉公式e^iθ=cos θ+i sin θ（弧度制）推导而得。

### 加减法
#### 加法法则
复数的加法按照以下规定的法则进行：设z1=a+bi，z2=c+di是任意两个复数，
则它们的和是 (a+bi)+(c+di)=(a+c)+(b+d)i。
两个复数的和依然是复数，它的实部是原来两个复数实部的和，它的虚部是原来两个虚部的和。
复数的加法满足交换律和结合律，
即对任意复数z1，z2，z3，有： z1+z2=z2+z1；(z1+z2)+z3=z1+(z2+z3)。
#### 减法法则
复数的减法按照以下规定的法则进行：设z1=a+bi，z2=c+di是任意两个复数，
则它们的差是 (a+bi)-(c+di)=(a-c)+(b-d)i。
两个复数的差依然是复数，它的实部是原来两个复数实部的差，它的虚部是原来两个虚部的差。

### 乘除法
#### 乘法法则
规定复数的乘法按照以下的法则进行：
设z1=a+bi，z2=c+di(a、b、c、d∈R)是任意两个复数，那么它们的积(a+bi)(c+di)=(ac-bd)+(bc+ad)i。
其实就是把两个复数相乘，类似两个多项式相乘，展开得: ac+adi+bci+bdi2，因为i2=-1，所以结果是(ac－bd)+(bc+ad)i 。两个复数的积仍然是一个复数。
#### 除法法则

